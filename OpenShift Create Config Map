- name: Create ConfigMap in OpenShift
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Create ConfigMap
      command: oc create configmap my-config --from-literal=key1=value1
      register: configmap_result
      failed_when: "'created' not in configmap_result.stdout and 'already exists' not in configmap_result.stdout"

    - name: Verify ConfigMap
      command: oc get configmap my-config -o json
      register: verify_result
      failed_when: "'my-config' not in verify_result.stdout"

    - name: Display success message
      debug:
        msg: "ConfigMap 'my-config' created successfully."
